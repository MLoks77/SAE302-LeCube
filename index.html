<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/style.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&display=swap" rel="stylesheet">

  <link rel="icon" type="image/png" href="images/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="images/favicon/favicon.svg" />
  <link rel="shortcut icon" href="images/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="Le Cube" />
  <link rel="manifest" href="images/favicon/site.webmanifest" />

  <title>Le cube</title>
</head>

<body id="landingpage">
  <main>

    <div class="min-h-screen w-full flex items-center justify-center overflow-hidden bg-transparent">
      <div class="grid grid-cols-3 grid-rows-3 gap-[1.3vw] sm:gap-[1vw] md:gap-[0.8vw]
                w-[90vw] h-[90vw] max-w-[480px] max-h-[480px] min-w-[270px] min-h-[270px] aspect-square z-10
                sm:w-[90vw] sm:h-[90vw] sm:max-w-[540px] sm:max-h-[540px] md:w-[120vw] md:h-[120vw] md:max-w-[600px] md:max-h-[600px] 
                lg:w-[90vw] lg:h-[90vw] lg:max-w-[680px] lg:max-h-[680px]">
        <div id="INTERVIEW" label="Interview"
          class="border border-white bg-white rounded-tl-lg shadow aspect-square flex items-center justify-center text-black text-[4vw] sm:text-[2.5vw] md:text-[2vw] lg:text-xl font-semibold select-none transition-all">
          Interview</div>
        <div id="AUDIO" label="Audio"
          class="border border-white bg-white rounded-t-lg shadow aspect-square flex items-center justify-center text-black text-[4vw] sm:text-[2.5vw] md:text-[2vw] lg:text-xl font-semibold select-none transition-all">
          Audio</div>
        <div id="HISTOIRE" label="Histoire"
          class="border border-white bg-white rounded-tr-lg shadow aspect-square flex items-center justify-center text-black text-[4vw] sm:text-[2.5vw] md:text-[2vw] lg:text-xl font-semibold select-none transition-all">
          Histoire</div>
        <div id="ARTICLE" label="Articles"
          class="border border-white bg-white rounded-l-lg shadow aspect-square flex items-center justify-center text-black text-[4vw] sm:text-[2.5vw] md:text-[2vw] lg:text-xl font-semibold select-none transition-all">
          Article</div>
        <div
          class="border border-white bg-white rounded-xl shadow aspect-square flex items-center justify-center select-none transition-all">
          <img src="images/logo_lecube.webp" alt="Logo Le Cube"
            class="w-2/3 h-2/3 object-contain mx-auto my-auto block pointer-events-none select-none" />
        </div>
        <div id="GALERIE" label="Galerie"
          class="border border-white bg-white rounded-r-lg shadow aspect-square flex items-center justify-center text-black text-[4vw] sm:text-[2.5vw] md:text-[2vw] lg:text-xl font-semibold select-none transition-all">
          Galerie</div>
        <div id="CUBE" label="Le Cube"
          class="border border-white bg-white rounded-bl-lg shadow aspect-square flex items-center justify-center text-black text-[4vw] sm:text-[2.5vw] md:text-[2vw] lg:text-xl font-semibold select-none transition-all">
          Le cube</div>
        <div id="EPREUVES" label="Epreuves"
          class="border border-white bg-white rounded-b-lg shadow aspect-square flex items-center justify-center text-black text-[4vw] sm:text-[2.5vw] md:text-[2vw] lg:text-xl font-semibold select-none transition-all">
          Epreuves</div>
        <div id="INFOGRAPHIE" label="Infographie"
          class="border border-white bg-white rounded-br-lg shadow aspect-square flex items-center justify-center text-black text-[4vw] sm:text-[2.5vw] md:text-[2vw] lg:text-xl font-semibold select-none transition-all">
          Infographie</div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
    <script>
      const cubeOrder = [
        "INTERVIEW",
        "AUDIO",
        "HISTOIRE",
        "ARTICLE",
        "GALERIE",
        "LE CUBE",
        "EPREUVES",
        "INFOGRAPHIE"
      ];

      // Palette Rubik (6 couleurs). On en réutilise 2 pour obtenir 8 cases.
      const rubikPalette = [
        "#E00000", // rouge
        "#FFD500", // jaune
        "#0045AD", // bleu
        "#009B48", // vert
        "#FF5900", // orange
      ];

      // Attribution d'une couleur par case (robuste, indépendante de la taille du tableau)
      const cubeColorById = {
        INTERVIEW: "#E00000", // rouge
        AUDIO: "#FFD500",     // jaune
        HISTOIRE: "#0045AD",  // bleu
        ARTICLE: "#009B48",   // vert
        GALERIE: "#FF5900",   // orange
        CUBE: "#FFFFFF",       // blanc
        EPREUVES: "#E00000",   // rouge (réutilisé)
        INFOGRAPHIE: "#009B48"  // vert (réutilisé)
      };

      // Timeline GSAP qui fait défiler les cases
      // Chaque case prend sa couleur associée puis revient au blanc avant la suivante
      const tl = gsap.timeline({ repeat: -1, defaults: { ease: "power1.inOut" } });
      cubeOrder.forEach(id => {
        const color = cubeColorById[id];
        const el = document.getElementById(id);
        if (!el || !color) return;
        tl.to(el, { backgroundColor: color, duration: 0.6 })
          .to({}, { duration: 0.4 })
          .to(el, { backgroundColor: "#FFFFFF", duration: 0.6 });
      });

      // Pause sur hover et forçage de la couleur associée
      cubeOrder.forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;

        el.addEventListener("mouseenter", () => {
          tl.pause();
          gsap.to(el, { backgroundColor: cubeColorById[id], duration: 0.2, overwrite: true });
        });

        el.addEventListener("mouseleave", () => {
          gsap.to(el, { backgroundColor: "#FFFFFF", duration: 0.2, overwrite: true });
          tl.play();
        });
      });

      // Met en pause la timeline quand l'onglet est inactif
      document.addEventListener("visibilitychange", () => {
        if (document.hidden) {
          tl.pause();
        } else {
          tl.play();
        }
      });
    </script>
  </main>
</body>

</html>