<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/style.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/output.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&display=swap" rel="stylesheet">

  <link rel="icon" type="image/png" href="images/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="images/favicon/favicon.svg" />
  <link rel="shortcut icon" href="images/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="Le Cube" />
  <link rel="manifest" href="images/favicon/site.webmanifest" />

  <title>Le cube</title>
</head>

<body id="landingpage" class="bg-black">
  <main>

    <video autoplay muted loop class="fixed right-0 bottom-0 min-w-full min-h-full object-cover z-0">
      <source src="images/videos/accueil_nocut.mp4" type="video/mp4">
    </video>

    <div class="min-h-screen w-full flex items-center justify-center overflow-hidden bg-transparent">
      <div class="grid grid-cols-3 grid-rows-3 gap-[1.3vw] sm:gap-[1vw] md:gap-[0.8vw]
                w-[90vw] h-[90vw] max-w-[480px] max-h-[480px] min-w-[270px] min-h-[270px] aspect-square z-10
                sm:w-[90vw] sm:h-[90vw] sm:max-w-[540px] sm:max-h-[540px] md:w-[120vw] md:h-[120vw] md:max-w-[600px] md:max-h-[600px] 
                lg:w-[90vw] lg:h-[90vw] lg:max-w-[680px] lg:max-h-[680px]">
        <a href="pages/interviews.html" class="cursor-pointer">
          <div id="INTERVIEW" label="Interview"
            class="border border-none bg-white rounded-br-xl shadow aspect-square flex items-center justify-center text-black text-lg hover:text-white hover:shadow hover:text-3xl  font-semibold select-none transition-all duration-300">
            RENCONTRER
          </div>
        </a>
        <a href="pages/audio.html" class=" cursor-pointer">
          <div id="AUDIO" label="Audio"
            class="border border-none bg-white rounded-b-xl shadow aspect-square flex items-center justify-center text-black text-lg hover:text-white hover:shadow hover:text-3xl  font-semibold select-none transition-all duration-300">
            ÉCOUTER
          </div>
        </a>
        <a href="pages/histoire.html" class=" cursor-pointer">
          <div id="HISTOIRE" label="Histoire"
            class="border border-none bg-white rounded-bl-xl shadow aspect-square flex items-center justify-center text-black text-lg hover:text-white hover:shadow hover:text-3xl  font-semibold select-none transition-all duration-300">
            COMPRENDRE
          </div>
        </a>
        <a href="pages/articles.html" class=" cursor-pointer">
          <div id="ARTICLE" label="Articles"
            class="border border-none bg-white rounded-r-xl shadow aspect-square flex items-center justify-center text-black text-lg hover:text-white hover:shadow hover:text-3xl  font-semibold select-none transition-all duration-300">
            APPRENDRE
          </div>
        </a>
        <a target="_blank" href="pages/Rubik.html"><div
          class="border border-none bg-white rounded-xl shadow aspect-square flex items-center justify-center select-none cursor-pointer hover:scale-105 duration-300 transition-all">
          <img src="images/logo_lecube.webp" alt="Logo Le Cube"
            class="w-2/3 h-2/3 object-contain mx-auto my-auto block pointer-events-none select-none" />
        </div></a>
        <a href="pages/galerie.html" class="cursor-pointer">
          <div id="GALERIE" label="Galerie"
            class="border border-none bg-white rounded-l-xl shadow aspect-square flex items-center justify-center text-black hover:text-white hover:shadow hover:text-3xl text-lg  font-semibold select-none transition-all duration-300">
            CÉLÉBRER
          </div>
        </a>
        <a href="pages/Rubik.html" target="_blank" class=" cursor-pointer">
          <div id="CUBE" label="CUBE"
            class="border border-none bg-white rounded-tr-xl shadow aspect-square flex items-center justify-center text-black hover:text-white hover:shadow hover:text-3xl text-lg  text-center font-semibold select-none transition-all duration-300">
            JOUER
          </div>
        </a>
        <a href="pages/epreuves.html" class=" cursor-pointer">
          <div id="EPREUVES" label="Epreuves"
            class="border border-none bg-white rounded-t-xl shadow aspect-square flex items-center justify-center text-black hover:text-white hover:shadow hover:text-3xl text-lg  font-semibold select-none transition-all duration-300">
            EXPLORER
          </div>
        </a>
        <a href="pages/Infographie.html" class=" cursor-pointer">
          <div id="INFOGRAPHIE" label="Infographie"
            class="border border-none bg-white rounded-tl-xl shadow aspect-square flex items-center justify-center text-black hover:text-white hover:shadow hover:text-3xl text-lg  font-semibold select-none transition-all duration-300">
            S'INFORMER
          </div>
        </a>
      </div>
    </div>



  </main>
</body>

</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
<script>
  const cubeOrder = [
    "INTERVIEW",
    "AUDIO",
    "HISTOIRE",
    "ARTICLE",
    "GALERIE",
    "CUBE",
    "EPREUVES",
    "INFOGRAPHIE"
  ];

  const rubikPalette = [
    "#FF4040", // rouge
    "#FFE646", // jaune
    "#2D8FFF", // bleu
    "#7EDD3F", // vert
    "#FF9940", // orange
  ];

  const cubeColorById = {
    INTERVIEW: "#FF4040", // rouge
    AUDIO: "#FFE646",     // jaune
    HISTOIRE: "#7EDD3F",  // bleu
    ARTICLE: "#2D8FFF",   // vert
    GALERIE: "#FF4040",   // orange
    CUBE: "#FFE646",      // JAUNE
    EPREUVES: "#FF9940",   // ORANGE
    INFOGRAPHIE: "#2D8FFF"  // BLEU
  };

  // Couleur de hover configurable
  const hoverColor = "#000000";

  // Baseline: toutes les cases en blanc au démarrage
  cubeOrder.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.backgroundColor = "#FFFFFF";
  });

  // Timeline GSAP qui fait défiler les cases
  // Chaque case prend sa couleur associée puis revient au blanc avant la suivante
  let currentActiveEl = null;
  const tl = gsap.timeline({ repeat: -1, defaults: { ease: "power4.inOut" } });
  const setAllTilesWhite = () => {
    cubeOrder.forEach(id2 => {
      const el2 = document.getElementById(id2);
      if (el2) gsap.set(el2, { backgroundColor: "#FFFFFF" });
    });
  };
  tl.eventCallback("onRepeat", setAllTilesWhite);
  cubeOrder.forEach(id => {
    const color = cubeColorById[id];
    const el = document.getElementById(id);
    if (!el || !color) return;
    tl.to(el, { backgroundColor: color, duration: 0.6, onStart() { currentActiveEl = el; } }) // changer la vitesse de vitesse
      .to(el, { backgroundColor: "#FFFFFF", duration: 0.6 });
  });

  // Pause sur hover et forçage de la couleur associée sans casser la timeline
  const hoverTweenByEl = new WeakMap();
  const hoverSnapshot = { time: 0, activeEl: null, activeColor: null };
  cubeOrder.forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;

    el.addEventListener("mouseenter", () => {
      // Snapshot de l'état courant
      hoverSnapshot.time = tl.time();
      hoverSnapshot.activeEl = currentActiveEl;
      hoverSnapshot.activeColor = currentActiveEl ? gsap.getProperty(currentActiveEl, "backgroundColor") : null;

      tl.pause();
      // Si une autre case était active, on la met en blanc temporairement
      if (currentActiveEl && currentActiveEl !== el) {
        gsap.set(currentActiveEl, { backgroundColor: "#FFFFFF" });
      }
      const existing = hoverTweenByEl.get(el);
      if (existing) existing.kill();
      const t = gsap.to(el, { backgroundColor: (hoverColor ?? cubeColorById[id]), duration: 0.2, overwrite: false });
      hoverTweenByEl.set(el, t);
    });

    el.addEventListener("mouseleave", () => {
      const existing = hoverTweenByEl.get(el);
      if (existing) existing.kill();
      // La case survolée redevient blanche (on nettoie la prop pour ne pas heurter la timeline)
      gsap.set(el, { clearProps: "backgroundColor" });
      // Reprise exactement à l'instant du pause, évite les sauts
      tl.time(hoverSnapshot.time).play();
    });
  });

  document.addEventListener("visibilitychange", () => {
    if (document.hidden) {
      tl.pause();
    } else {
      tl.play();
    }
  });
</script>

<script src="js/main.js"></script>
